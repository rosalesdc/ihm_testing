<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record model="ir.ui.view" id="stock_state_picking_form">
            <field name="name">stock_state_picking_form</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                
                <!--                AGREGAR CAMPO DE ESTADO Y EL CAMPO QUE CAMBIA EL ESTADO DE LOS PRODUCTOS (NO VISIBLE)-->
                <xpath expr="//field[@name='origin']" position="after">
                    <field name="estado_id"/>
                    <field name="cambia_estatus_inmueble" invisible="True"/>
                </xpath>
                
                <!--                CAMBIAR LA ETIQUETA DEL BOTON COMPROBAR DISPONIBILIDAD Y LIBERAR SOLO ES VISIBLE PARA UN GRUPO-->
                <xpath expr="//button[@name='action_assign']" position="replace">
                    <button name="action_assign" attrs="{'invisible': [('show_check_availability', '=', False)]}" string="Liberar" type="object" class="oe_highlight" groups="ihm_estatus_entregas.group_liberar_entrega"/>
                </xpath>
                
                <!--                BOTON VALIDAR SOLO ES VISIBLE PARA UN GRUPO, REVISAR PUES LOS DOS SON IGUALES-->
                <xpath expr="//header/button[@name='button_validate']" position="replace">
                    <button name="button_validate" attrs="{'invisible': ['|', ('state', 'in', ('waiting','confirmed')), ('show_validate', '=', False)]}" string="Validar" type="object" class="oe_highlight" groups="ihm_estatus_entregas.group_validar_entrega"/>
                </xpath>
                <xpath expr="//header/button[@class='o_btn_validate']" position="replace">
                    <button name="button_validate" attrs="{'invisible': ['|', ('state', 'not in', ('waiting', 'confirmed')), ('show_validate', '=', False)]}" string="Validar" type="object" groups="ihm_estatus_entregas.group_validar_entrega" class="o_btn_validate"/>
                </xpath>
            </field>
        </record>
    </data>
</odoo>

<!--
<button name="button_validate" attrs="{'invisible': ['|', ('state', 'in', ('waiting','confirmed')), ('show_validate', '=', False)]}" string="Validate" type="object" class="oe_highlight" groups="stock.group_stock_user"/>
<button name="button_validate" attrs="{'invisible': ['|', ('state', 'not in', ('waiting', 'confirmed')), ('show_validate', '=', False)]}" string="Validate" type="object" groups="stock.group_stock_user" class="o_btn_validate"/>-->

<!--<button name="button_validate" attrs="{'invisible': ['|', ('state', 'in', ('waiting','confirmed')), ('show_validate', '=', False)]}" string="Validate" type="object" class="oe_highlight" groups="stock.group_stock_user"/>
<button name="button_validate" attrs="{'invisible': ['|', ('state', 'not in', ('waiting', 'confirmed')), ('show_validate', '=', False)]}" string="Validate" type="object" groups="stock.group_stock_user" class="o_btn_validate"/>
-->
